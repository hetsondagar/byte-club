export interface AdventureNode {
  id: number;
  title: string;
  story: string;
  question: string;
  hint: string;
  demoAnswer: string; // Shows format: "e.g., 'HashMap'" or "e.g., 'O(n)'"
  correctAnswer: string;
  xp: number;
  difficulty: "easy" | "medium" | "hard" | "expert";
  position: { x: number; y: number };
  connections: number[]; // IDs of connected nodes
  slug?: string;
}

export const adventureNodes: AdventureNode[] = [
  // Level 1-10: BEGINNER REALM (Easy)
  {
    id: 1,
    title: "Cipher Vault",
    story: "You enter the Cipher Vault, a neon-lit chamber where holographic ciphers float like fireflies. Each code holds a part of the master key. The AI whispers: 'Decrypt to survive!' The first code is 'JXQRMK', encrypted using a dynamic Caesar shift where each character is shifted by its 1-based index modulo 26. Code the decryption algorithm.",
    question: "Decrypt 'JXQRMK' using dynamic Caesar (shift by position). What's the first 3 letters of result?",
    hint: "Subtract the character's position index from each letter (mod 26). First three letters only.",
    demoAnswer: "e.g., 'DYN'",
    correctAnswer: "IMP",
    xp: 100,
    difficulty: "easy",
    position: { x: 10, y: 50 },
    connections: [2],
  },
  {
    id: 2,
    title: "Quantum Grid",
    story: "A massive 50x50 quantum grid floats before you. Pulses of neon energy leap from node to node. Some nodes vanish (0), others stay open (1). Your goal: navigate from top-left (0,0) to bottom-right (49,49) using BFS shortest path. Code it and tell me the algorithm used.",
    question: "Which search algorithm finds SHORTEST path in unweighted grid?",
    hint: "Breadth-First explores level by level, guarantees shortest in unweighted graphs.",
    demoAnswer: "e.g., 'DFS'",
    correctAnswer: "BFS",
    xp: 150,
    difficulty: "easy",
    position: { x: 15, y: 45 },
    connections: [3],
  },
  {
    id: 3,
    title: "Labyrinth of Bits",
    story: "You enter the Labyrinth of Bits. Each corridor has walls that emit XOR pulses. One wrong move triggers a trap. You must traverse the path and compute the XOR of hidden codes [13,7,2,8,5] along the way to unlock the exit. Code it and reveal the key.",
    question: "XOR of [13,7,2,8,5] gives exit key? (number)",
    hint: "XOR numbers sequentially: 13⊕7⊕2⊕8⊕5. XOR is associative.",
    demoAnswer: "e.g., '15'",
    correctAnswer: "5",
    xp: 120,
    difficulty: "easy",
    position: { x: 20, y: 40 },
    connections: [4],
  },
  {
    id: 4,
    title: "Temporal Maze",
    story: "Time bends in this maze. Each step shifts walls according to a secret algorithm. A 30x30 grid changes dynamically. Walls shift every turn based on position. You need to find which algorithm handles changing graphs best. What search re-evaluates each step?",
    question: "Which search works best for DYNAMICALLY changing graphs?",
    hint: "It re-evaluates at each step. Used for real-time pathfinding. Starts with 'A'.",
    demoAnswer: "e.g., 'DFS'",
    correctAnswer: "Astar",
    xp: 250,
    difficulty: "medium",
    position: { x: 25, y: 35 },
    connections: [5],
  },
  {
    id: 5,
    title: "Neon Firewall",
    story: "A rogue AI firewall has trapped a critical server behind layers of shifting encrypted walls. Each wall opens only when a sequence is decrypted. The sequence is 'MZKQ' encrypted with pseudo-random shift: shift(i) = (i² + 3) % 26. Code the decrypt function and find the first letter.",
    question: "Decrypt 'MZKQ' with shift(i)=(i²+3)%26. What's the FIRST decrypted letter?",
    hint: "For position 0: M - (0²+3)%26. Reverse the shift using modular arithmetic.",
    demoAnswer: "e.g., 'A'",
    correctAnswer: "J",
    xp: 180,
    difficulty: "medium",
    position: { x: 30, y: 30 },
    connections: [6],
  },
  {
    id: 6,
    title: "Binary Bridge",
    story: "A bridge made entirely of glowing bits appears. Each segment flickers with Fibonacci numbers. Nodes vanish unpredictably. Only by computing the XOR of the path sequence [21,34,55,89,144] can you cross safely. Code and compute the bridge activation key.",
    question: "XOR of [21,34,55,89,144] gives bridge key? (number)",
    hint: "Sequential XOR from start to end. 21⊕34⊕55⊕89⊕144.",
    demoAnswer: "e.g., '100'",
    correctAnswer: "183",
    xp: 130,
    difficulty: "medium",
    position: { x: 35, y: 25 },
    connections: [7],
  },
  {
    id: 7,
    title: "Encrypted Passage",
    story: "A neon passage is filled with scrambled letters glowing in sequence: 'SCRAMBLE'. Each letter pulses at different frequencies. The door opens when you find the UNIQUE frequency—the first character that appears only once. Code a frequency counter.",
    question: "First non-repeating character in 'SCRAMBLE'? (one letter)",
    hint: "Use hash map to count. 'S' appears twice, 'C' once... which comes first?",
    demoAnswer: "e.g., 'A'",
    correctAnswer: "C",
    xp: 110,
    difficulty: "easy",
    position: { x: 40, y: 20 },
    connections: [8],
  },
  {
    id: 8,
    title: "Hologram Lock",
    story: "The hologram lock flashes digits that rearrange themselves every second: [7,14,21,28,35]. The ancient mechanism uses modular arithmetic. Sum all numbers and take modulo 7 to find the lock code. What's the result?",
    question: "Sum of [7,14,21,28,35] modulo 7? (number)",
    hint: "Sum = 7+14+21+28+35 = 105. Then 105 % 7 = ?",
    demoAnswer: "e.g., '5'",
    correctAnswer: "0",
    xp: 115,
    difficulty: "easy",
    position: { x: 45, y: 25 },
    connections: [9],
  },
  {
    id: 9,
    title: "Data Stream Rift",
    story: "You encounter a rift in the data stream. Neon currents split and merge chaotically. A data packet starts at (0,0) in a 20x20 grid. Movement rules: if current value is EVEN, move RIGHT; if ODD, move DOWN. Simulate the flow and find where it ends up. Code the simulator.",
    question: "Final position ends at row? (0-19, just row number)",
    hint: "Start (0,0). Alternate movements based on position values. Track final row coordinate.",
    demoAnswer: "e.g., '15'",
    correctAnswer: "10",
    xp: 160,
    difficulty: "medium",
    position: { x: 50, y: 30 },
    connections: [10],
  },
  {
    id: 10,
    title: "Code Reactor",
    story: "The Code Reactor overloads with input! Numbers [2,3,5,7,11] create an unstable product. Only by computing the product modulo a prime (101) can you stabilize it. Fail, and the neon lab explodes! Code the modular multiplication.",
    question: "Product of [2,3,5,7,11] modulo 101? (number)",
    hint: "Multiply all: 2×3×5×7×11 = 2310. Then 2310 % 101 = ?",
    demoAnswer: "e.g., '50'",
    correctAnswer: "30",
    xp: 170,
    difficulty: "medium",
    position: { x: 55, y: 35 },
    connections: [11],
  },

  // Level 11-25: NOVICE NEXUS (Easy-Medium)
  {
    id: 11,
    title: "Swap Ceremony",
    story: "To swap two variables without a third: a=a+b; b=a-b; a=a-b. Code it. How many operations? (number)",
    question: "How many arithmetic operations in the swap? (count +, -)",
    hint: "Count each + and - separately.",
    demoAnswer: "e.g., '3'",
    correctAnswer: "3",
    xp: 150,
    difficulty: "easy",
    position: { x: 60, y: 40 },
    connections: [12],
  },
  {
    id: 12,
    title: "Palindrome Portal",
    story: "String 'racecar' reads same backwards. The algorithm to check this in O(n) time?",
    question: "Two-pointer technique has what time complexity?",
    hint: "Linear time. One pass through the string.",
    demoAnswer: "e.g., 'O(1)'",
    correctAnswer: "O(n)",
    xp: 160,
    difficulty: "medium",
    position: { x: 65, y: 45 },
    connections: [13],
  },
  {
    id: 13,
    title: "Fibonacci Fortress",
    story: "Fibonacci: fib(5) with memoization calls fib(3) how many times? Code it and count.",
    question: "With memoization, fib(3) is computed how many times in fib(5)? (number)",
    hint: "Memoization stores results. Once computed, reused.",
    demoAnswer: "e.g., '2'",
    correctAnswer: "1",
    xp: 170,
    difficulty: "medium",
    position: { x: 70, y: 50 },
    connections: [14],
  },
  {
    id: 14,
    title: "Reverse Array Realm",
    story: "Reverse [1,2,3,4,5] in-place. How many swaps needed? Code and count.",
    question: "Reversing array of 5 elements needs how many swaps? (number)",
    hint: "n/2 for n elements. 5/2 = ?",
    demoAnswer: "e.g., '3'",
    correctAnswer: "2",
    xp: 180,
    difficulty: "medium",
    position: { x: 70, y: 55 },
    connections: [15],
  },
  {
    id: 15,
    title: "Factorial Frontier",
    story: "Factorial of 0 is a special case. What is 0! ?",
    question: "What is 0! (factorial of zero)? (number)",
    hint: "It's defined as 1 by mathematical convention.",
    demoAnswer: "e.g., '0'",
    correctAnswer: "1",
    xp: 190,
    difficulty: "easy",
    position: { x: 65, y: 60 },
    connections: [16],
  },
  {
    id: 16,
    title: "Binary Beacon",
    story: "Binary 1011 in decimal is? Convert and unlock the beacon.",
    question: "Convert binary 1011 to decimal (number)",
    hint: "8 + 0 + 2 + 1 = ?",
    demoAnswer: "e.g., '10'",
    correctAnswer: "11",
    xp: 200,
    difficulty: "medium",
    position: { x: 60, y: 65 },
    connections: [17],
  },
  {
    id: 17,
    title: "Recursion Ridge",
    story: "Recursion without base case causes? The stack screams in pain.",
    question: "Infinite recursion causes what error? (two words, no space)",
    hint: "The call stack runs out of space.",
    demoAnswer: "e.g., 'stackoverflow'",
    correctAnswer: "stackoverflow",
    xp: 210,
    difficulty: "medium",
    position: { x: 55, y: 70 },
    connections: [18],
  },
  {
    id: 18,
    title: "Prime Pinnacle",
    story: "Is 1 a prime number? The ancient debate. Code the check.",
    question: "Is 1 prime? (yes/no)",
    hint: "Prime needs exactly 2 divisors. 1 has only one: itself.",
    demoAnswer: "e.g., 'yes'",
    correctAnswer: "no",
    xp: 220,
    difficulty: "medium",
    position: { x: 50, y: 75 },
    connections: [19],
  },
  {
    id: 19,
    title: "Null Void",
    story: "Dereferencing a null pointer causes immediate? The system crashes.",
    question: "Null pointer dereference causes what fault? (one word)",
    hint: "Memory access violation. Starts with 'seg'.",
    demoAnswer: "e.g., 'segfault'",
    correctAnswer: "segfault",
    xp: 230,
    difficulty: "medium",
    position: { x: 45, y: 70 },
    connections: [20],
  },
  {
    id: 20,
    title: "Static vs Dynamic",
    story: "Java's String lives in which memory region?",
    question: "Java Strings are stored in what memory pool? (one word)",
    hint: "It's a pool of reused string literals.",
    demoAnswer: "e.g., 'heap'",
    correctAnswer: "stringpool",
    xp: 240,
    difficulty: "medium",
    position: { x: 40, y: 65 },
    connections: [21],
  },

  // Level 21-40: INTERMEDIATE ISLES (Medium)
  {
    id: 21,
    title: "Bubble Trouble",
    story: "Bubble sort on [3,1,4,1,5]. After first pass, what's at the end?",
    question: "After 1 pass of bubble sort, largest element is at? (start/end)",
    hint: "Bubble sort bubbles the largest to...",
    demoAnswer: "e.g., 'start'",
    correctAnswer: "end",
    xp: 250,
    difficulty: "medium",
    position: { x: 35, y: 60 },
    connections: [22],
  },
  {
    id: 22,
    title: "Binary Search Sector",
    story: "Binary search requires sorted data. But what's the FIRST step?",
    question: "Binary search first checks which index? (start/middle/end)",
    hint: "Divide and conquer. Check the center.",
    demoAnswer: "e.g., 'start'",
    correctAnswer: "middle",
    xp: 260,
    difficulty: "medium",
    position: { x: 30, y: 55 },
    connections: [23],
  },
  {
    id: 23,
    title: "LinkedList Labyrinth",
    story: "Linked list has O(1) insertion at? Code it and tell me.",
    question: "LinkedList O(1) insertion at which position? (head/tail/middle)",
    hint: "If you have the reference, adding to front is instant.",
    demoAnswer: "e.g., 'middle'",
    correctAnswer: "head",
    xp: 270,
    difficulty: "medium",
    position: { x: 25, y: 50 },
    connections: [24],
  },
  {
    id: 24,
    title: "Stack Sanctuary",
    story: "Push 1,2,3. Pop once. What's on top now?",
    question: "After push(1,2,3) then pop(), top element? (number)",
    hint: "LIFO: Last In First Out. 3 was popped.",
    demoAnswer: "e.g., '1'",
    correctAnswer: "2",
    xp: 280,
    difficulty: "medium",
    position: { x: 20, y: 45 },
    connections: [25],
  },
  {
    id: 25,
    title: "Queue Quest",
    story: "Enqueue 5,6,7. Dequeue once. Front element is?",
    question: "After enqueue(5,6,7) then dequeue(), front? (number)",
    hint: "FIFO: First In First Out. 5 was dequeued.",
    demoAnswer: "e.g., '7'",
    correctAnswer: "6",
    xp: 290,
    difficulty: "medium",
    position: { x: 15, y: 40 },
    connections: [26],
  },
  {
    id: 26,
    title: "Two Sum Shrine",
    story: "Array [2,7,11,15], target 9. The FASTEST approach uses what structure?",
    question: "Two-sum optimal solution uses which data structure?",
    hint: "O(1) lookups. Stores seen numbers.",
    demoAnswer: "e.g., 'array'",
    correctAnswer: "hashmap",
    xp: 300,
    difficulty: "medium",
    position: { x: 20, y: 35 },
    connections: [27],
  },
  {
    id: 27,
    title: "Pointer Paradox",
    story: "int *ptr = NULL; *ptr = 5; What happens? Code and observe.",
    question: "Null pointer assignment causes? (one word)",
    hint: "Segmentation fault. Short form.",
    demoAnswer: "e.g., 'error'",
    correctAnswer: "segfault",
    xp: 310,
    difficulty: "medium",
    position: { x: 25, y: 30 },
    connections: [28],
  },
  {
    id: 28,
    title: "Bitwise Bunker",
    story: "5 & 3 in binary: 101 & 011. The result?",
    question: "What is 5 & 3? (number)",
    hint: "AND operation: 1&1=1, others are 0. 101 & 011 = 001",
    demoAnswer: "e.g., '7'",
    correctAnswer: "1",
    xp: 320,
    difficulty: "medium",
    position: { x: 30, y: 25 },
    connections: [29],
  },
  {
    id: 29,
    title: "XOR Nexus",
    story: "Array [1,2,3,2,1]. XOR all elements. The survivor is?",
    question: "XOR of [1,2,3,2,1] gives? (number)",
    hint: "XOR cancels pairs. 1^1=0, 2^2=0. Only 3 remains.",
    demoAnswer: "e.g., '5'",
    correctAnswer: "3",
    xp: 330,
    difficulty: "medium",
    position: { x: 35, y: 20 },
    connections: [30],
  },
  {
    id: 30,
    title: "Substring Station",
    story: "Longest common substring of 'abcde' and 'abfce'? Code and extract.",
    question: "Longest common substring length? (number)",
    hint: "'ab' is common at start. Length = 2.",
    demoAnswer: "e.g., '3'",
    correctAnswer: "2",
    xp: 340,
    difficulty: "medium",
    position: { x: 40, y: 15 },
    connections: [31],
  },

  // Level 31-50: ADVANCED ARENA (Medium-Hard)
  {
    id: 31,
    title: "Merge Sort Matrix",
    story: "Merge sort divides. How many times to split array of 16 elements?",
    question: "Merge sort splits array of 16 how many times? (number)",
    hint: "16 → 8 → 4 → 2 → 1. Count divisions.",
    demoAnswer: "e.g., '3'",
    correctAnswer: "4",
    xp: 350,
    difficulty: "medium",
    position: { x: 45, y: 10 },
    connections: [32],
  },
  {
    id: 32,
    title: "Quick Pivot Point",
    story: "QuickSort picks pivot. Best case complexity?",
    question: "QuickSort best case time complexity?",
    hint: "When pivot splits perfectly. n log n.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(nlogn)",
    xp: 360,
    difficulty: "hard",
    position: { x: 50, y: 10 },
    connections: [33],
  },
  {
    id: 33,
    title: "Hash Collision Haven",
    story: "Hash function maps 15 and 25 to same bucket. This is called?",
    question: "Same hash index for different keys is? (one word)",
    hint: "When two keys crash into each other.",
    demoAnswer: "e.g., 'conflict'",
    correctAnswer: "collision",
    xp: 370,
    difficulty: "medium",
    position: { x: 55, y: 10 },
    connections: [34],
  },
  {
    id: 34,
    title: "BST Balance",
    story: "Binary Search Tree height with n nodes. Worst case?",
    question: "BST worst case height? (Big-O)",
    hint: "When tree becomes a linked list. Linear.",
    demoAnswer: "e.g., 'O(logn)'",
    correctAnswer: "O(n)",
    xp: 380,
    difficulty: "hard",
    position: { x: 60, y: 15 },
    connections: [35],
  },
  {
    id: 35,
    title: "AVL Ascension",
    story: "AVL tree balance factor is? The key to self-balancing.",
    question: "AVL balance factor is difference between? (left/right)",
    hint: "Height difference of left and right subtrees.",
    demoAnswer: "e.g., 'heights'",
    correctAnswer: "heights",
    xp: 390,
    difficulty: "hard",
    position: { x: 65, y: 20 },
    connections: [36],
  },
  {
    id: 36,
    title: "Heap Hierarchy",
    story: "Max heap: parent is always? The rule of dominance.",
    question: "In max heap, parent is always? (greater/smaller)",
    hint: "MAX heap means maximum at top.",
    demoAnswer: "e.g., 'smaller'",
    correctAnswer: "greater",
    xp: 400,
    difficulty: "medium",
    position: { x: 70, y: 25 },
    connections: [37],
  },
  {
    id: 37,
    title: "Graph Traverse",
    story: "DFS uses which data structure internally?",
    question: "DFS uses which structure? (stack/queue)",
    hint: "Depth-first goes deep. LIFO structure.",
    demoAnswer: "e.g., 'queue'",
    correctAnswer: "stack",
    xp: 410,
    difficulty: "medium",
    position: { x: 75, y: 30 },
    connections: [38],
  },
  {
    id: 38,
    title: "BFS Basin",
    story: "BFS explores level by level. It uses?",
    question: "BFS uses which structure? (stack/queue)",
    hint: "Breadth-first is FIFO. Level by level.",
    demoAnswer: "e.g., 'stack'",
    correctAnswer: "queue",
    xp: 420,
    difficulty: "medium",
    position: { x: 80, y: 35 },
    connections: [39],
  },
  {
    id: 39,
    title: "Dijkstra Domain",
    story: "Dijkstra's algorithm finds? The shortest quest.",
    question: "Dijkstra finds shortest? (path/tree/cycle)",
    hint: "From source to all vertices.",
    demoAnswer: "e.g., 'tree'",
    correctAnswer: "path",
    xp: 430,
    difficulty: "hard",
    position: { x: 80, y: 40 },
    connections: [40],
  },
  {
    id: 40,
    title: "Greedy Gateway",
    story: "Coin change: [1,5,10,25]. To make 30, greedy gives optimal?",
    question: "Greedy approach gives optimal for coin change? (yes/no)",
    hint: "Greedy takes largest first. 25+5 = 30. Optimal!",
    demoAnswer: "e.g., 'no'",
    correctAnswer: "yes",
    xp: 440,
    difficulty: "hard",
    position: { x: 75, y: 45 },
    connections: [41],
  },

  // Level 41-60: EXPERT EXPANSE (Hard)
  {
    id: 41,
    title: "DP Dimension",
    story: "Fibonacci with DP: space complexity?",
    question: "Fibonacci DP optimized space? (Big-O)",
    hint: "You only need last 2 values. Constant space.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(1)",
    xp: 450,
    difficulty: "hard",
    position: { x: 70, y: 50 },
    connections: [42],
  },
  {
    id: 42,
    title: "Knapsack Kingdom",
    story: "0/1 Knapsack is what class of problem?",
    question: "Knapsack problem class? (NP/P)",
    hint: "It's NP-complete. Hard to solve, easy to verify.",
    demoAnswer: "e.g., 'P'",
    correctAnswer: "NP",
    xp: 460,
    difficulty: "hard",
    position: { x: 65, y: 55 },
    connections: [43],
  },
  {
    id: 43,
    title: "LCS Labyrinth",
    story: "Longest Common Subsequence of 'ABCD' and 'ACDF': length?",
    question: "LCS('ABCD', 'ACDF') length? (number)",
    hint: "'A', 'C', 'D' are common in order. Length = 3.",
    demoAnswer: "e.g., '2'",
    correctAnswer: "3",
    xp: 470,
    difficulty: "hard",
    position: { x: 60, y: 60 },
    connections: [44],
  },
  {
    id: 44,
    title: "Trie Territory",
    story: "Trie search complexity for word length k?",
    question: "Trie search time complexity? (Big-O)",
    hint: "Depends only on word length, not number of words.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(k)",
    xp: 480,
    difficulty: "hard",
    position: { x: 55, y: 55 },
    connections: [45],
  },
  {
    id: 45,
    title: "Segment Tree Sector",
    story: "Segment tree for range sum queries: build time?",
    question: "Building segment tree complexity? (Big-O)",
    hint: "Similar to building a binary tree from array.",
    demoAnswer: "e.g., 'O(logn)'",
    correctAnswer: "O(n)",
    xp: 490,
    difficulty: "hard",
    position: { x: 50, y: 50 },
    connections: [46],
  },
  {
    id: 46,
    title: "Fenwick Field",
    story: "Binary Indexed Tree update: complexity?",
    question: "BIT (Fenwick Tree) update time? (Big-O)",
    hint: "Logarithmic. Updates parent nodes in tree.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(logn)",
    xp: 500,
    difficulty: "hard",
    position: { x: 45, y: 45 },
    connections: [47],
  },
  {
    id: 47,
    title: "Cycle Detection",
    story: "Floyd's algorithm detects cycles using how many pointers?",
    question: "Tortoise-Hare uses how many pointers? (number)",
    hint: "One slow (tortoise), one fast (hare).",
    demoAnswer: "e.g., '3'",
    correctAnswer: "2",
    xp: 510,
    difficulty: "hard",
    position: { x: 40, y: 40 },
    connections: [48],
  },
  {
    id: 48,
    title: "Topological Temple",
    story: "Topological sort works on? The graph requirement.",
    question: "Topological sort requires graph type? (DAG/cyclic)",
    hint: "Directed Acyclic Graph. No cycles allowed.",
    demoAnswer: "e.g., 'cyclic'",
    correctAnswer: "DAG",
    xp: 520,
    difficulty: "hard",
    position: { x: 35, y: 35 },
    connections: [49],
  },
  {
    id: 49,
    title: "Kruskal's Keep",
    story: "Kruskal's MST algorithm sorts edges by?",
    question: "Kruskal sorts edges by? (weight/vertex)",
    hint: "Minimum Spanning Tree needs smallest weights first.",
    demoAnswer: "e.g., 'vertex'",
    correctAnswer: "weight",
    xp: 530,
    difficulty: "hard",
    position: { x: 30, y: 30 },
    connections: [50],
  },
  {
    id: 50,
    title: "Prim's Passage",
    story: "Prim's MST grows from? The starting strategy.",
    question: "Prim's algorithm starts from? (vertex/edge)",
    hint: "It grows the tree from a single starting point.",
    demoAnswer: "e.g., 'edge'",
    correctAnswer: "vertex",
    xp: 540,
    difficulty: "hard",
    position: { x: 25, y: 25 },
    connections: [51],
  },

  // Level 51-70: MASTER MOUNTAINS (Hard-Expert)
  {
    id: 51,
    title: "Sliding Window Wastes",
    story: "Max sum subarray of size k: technique?",
    question: "Fixed-size subarray max uses? (sliding/expanding)",
    hint: "Slide the window, don't recalculate from scratch.",
    demoAnswer: "e.g., 'expanding'",
    correctAnswer: "sliding",
    xp: 550,
    difficulty: "hard",
    position: { x: 25, y: 20 },
    connections: [52],
  },
  {
    id: 52,
    title: "KMP Komplex",
    story: "KMP preprocessing builds what array?",
    question: "KMP builds which array? (prefix/suffix)",
    hint: "Longest Proper Prefix which is also Suffix.",
    demoAnswer: "e.g., 'suffix'",
    correctAnswer: "prefix",
    xp: 560,
    difficulty: "expert",
    position: { x: 30, y: 15 },
    connections: [53],
  },
  {
    id: 53,
    title: "Rabin-Karp Realm",
    story: "Rabin-Karp uses rolling hash. Average complexity?",
    question: "Rabin-Karp average time? (Big-O)",
    hint: "Linear in pattern + text length.",
    demoAnswer: "e.g., 'O(n^2)'",
    correctAnswer: "O(n+m)",
    xp: 570,
    difficulty: "expert",
    position: { x: 35, y: 10 },
    connections: [54],
  },
  {
    id: 54,
    title: "Z-Algorithm Zone",
    story: "Z-array for 'aabcaab'. Z[4] (0-indexed) equals?",
    question: "Z-array at index 4? (number)",
    hint: "Z[i] = longest substring starting at i matching prefix.",
    demoAnswer: "e.g., '5'",
    correctAnswer: "3",
    xp: 580,
    difficulty: "expert",
    position: { x: 40, y: 10 },
    connections: [55],
  },
  {
    id: 55,
    title: "Suffix Array Sanctuary",
    story: "Suffix array for 'banana' length?",
    question: "Suffix array of 'banana' has how many elements? (number)",
    hint: "One suffix for each position: b, ba, ban, bana, banan, banana",
    demoAnswer: "e.g., '7'",
    correctAnswer: "6",
    xp: 590,
    difficulty: "hard",
    position: { x: 45, y: 15 },
    connections: [56],
  },
  {
    id: 56,
    title: "Manacher's Madness",
    story: "Manacher's algorithm finds longest palindrome in?",
    question: "Manacher's time complexity? (Big-O)",
    hint: "Linear time palindrome detection. One pass.",
    demoAnswer: "e.g., 'O(n^2)'",
    correctAnswer: "O(n)",
    xp: 600,
    difficulty: "expert",
    position: { x: 50, y: 20 },
    connections: [57],
  },
  {
    id: 57,
    title: "Kadane's Canyon",
    story: "Maximum subarray sum using Kadane's: space?",
    question: "Kadane's space complexity? (Big-O)",
    hint: "Only tracks current and max. Constant space.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(1)",
    xp: 610,
    difficulty: "hard",
    position: { x: 55, y: 25 },
    connections: [58],
  },
  {
    id: 58,
    title: "Dutch Flag Dilemma",
    story: "Dutch National Flag sorts 0,1,2 in one pass. How many pointers?",
    question: "Dutch flag algorithm uses how many pointers? (number)",
    hint: "Low, mid, high pointers. Count them.",
    demoAnswer: "e.g., '2'",
    correctAnswer: "3",
    xp: 620,
    difficulty: "hard",
    position: { x: 60, y: 30 },
    connections: [59],
  },
  {
    id: 59,
    title: "Moore's Majority",
    story: "Boyer-Moore majority element: space complexity?",
    question: "Boyer-Moore voting space? (Big-O)",
    hint: "Only needs counter and candidate. Constant.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(1)",
    xp: 630,
    difficulty: "hard",
    position: { x: 65, y: 35 },
    connections: [60],
  },
  {
    id: 60,
    title: "Backtracking Bastion",
    story: "N-Queens problem for n=8. Is it solvable?",
    question: "8-Queens has solution? (yes/no)",
    hint: "Yes! There are 92 distinct solutions.",
    demoAnswer: "e.g., 'no'",
    correctAnswer: "yes",
    xp: 640,
    difficulty: "hard",
    position: { x: 70, y: 40 },
    connections: [61],
  },

  // Level 61-80: GRANDMASTER GROUNDS (Expert)
  {
    id: 61,
    title: "Bellman-Ford Border",
    story: "Bellman-Ford detects? The graph anomaly.",
    question: "Bellman-Ford detects negative? (cycle/edge/weight)",
    hint: "Negative cycles break shortest path algorithms.",
    demoAnswer: "e.g., 'edge'",
    correctAnswer: "cycle",
    xp: 650,
    difficulty: "expert",
    position: { x: 75, y: 45 },
    connections: [62],
  },
  {
    id: 62,
    title: "Floyd-Warshall Fortress",
    story: "Floyd-Warshall finds shortest paths between? ALL pairs.",
    question: "Floyd-Warshall time complexity? (Big-O)",
    hint: "Triple nested loops for all pairs.",
    demoAnswer: "e.g., 'O(n^2)'",
    correctAnswer: "O(n^3)",
    xp: 660,
    difficulty: "expert",
    position: { x: 75, y: 50 },
    connections: [63],
  },
  {
    id: 63,
    title: "Strongly Connected",
    story: "Kosaraju's algorithm finds? The graph components.",
    question: "Kosaraju finds what components? (strongly/weakly)",
    hint: "Strongly connected components where all vertices reach each other.",
    demoAnswer: "e.g., 'weakly'",
    correctAnswer: "strongly",
    xp: 670,
    difficulty: "expert",
    position: { x: 70, y: 55 },
    connections: [64],
  },
  {
    id: 64,
    title: "Articulation Abyss",
    story: "Articulation point removal does what to graph?",
    question: "Removing articulation point? (disconnects/connects)",
    hint: "It's a critical vertex. Removal breaks connectivity.",
    demoAnswer: "e.g., 'connects'",
    correctAnswer: "disconnects",
    xp: 680,
    difficulty: "expert",
    position: { x: 65, y: 60 },
    connections: [65],
  },
  {
    id: 65,
    title: "Bridge Breach",
    story: "Bridge edge removal increases? The component count.",
    question: "Removing bridge increases components by? (number)",
    hint: "One connected graph becomes two.",
    demoAnswer: "e.g., '2'",
    correctAnswer: "1",
    xp: 690,
    difficulty: "expert",
    position: { x: 60, y: 65 },
    connections: [66],
  },
  {
    id: 66,
    title: "Tarjan's Territory",
    story: "Tarjan's SCC uses which traversal?",
    question: "Tarjan's algorithm uses? (DFS/BFS)",
    hint: "Depth-first with low-link values.",
    demoAnswer: "e.g., 'BFS'",
    correctAnswer: "DFS",
    xp: 700,
    difficulty: "expert",
    position: { x: 55, y: 70 },
    connections: [67],
  },
  {
    id: 67,
    title: "Eulerian Edge",
    story: "Eulerian path visits every? Once and only once.",
    question: "Eulerian path visits every? (vertex/edge)",
    hint: "Named after Euler's bridge problem. Edges, not vertices.",
    demoAnswer: "e.g., 'vertex'",
    correctAnswer: "edge",
    xp: 710,
    difficulty: "expert",
    position: { x: 50, y: 70 },
    connections: [68],
  },
  {
    id: 68,
    title: "Hamiltonian Hall",
    story: "Hamiltonian cycle visits every vertex exactly once. Is it NP?",
    question: "Hamiltonian cycle is NP-complete? (yes/no)",
    hint: "Yes! It's one of Karp's 21 NP-complete problems.",
    demoAnswer: "e.g., 'no'",
    correctAnswer: "yes",
    xp: 720,
    difficulty: "expert",
    position: { x: 45, y: 65 },
    connections: [69],
  },
  {
    id: 69,
    title: "Convex Hull Hideout",
    story: "Graham scan for convex hull: first step?",
    question: "Graham scan first finds? (lowest/highest) point",
    hint: "Start from lowest y-coordinate point.",
    demoAnswer: "e.g., 'highest'",
    correctAnswer: "lowest",
    xp: 730,
    difficulty: "expert",
    position: { x: 40, y: 60 },
    connections: [70],
  },
  {
    id: 70,
    title: "Line Sweep Legend",
    story: "Line sweep for closest pair: data structure used?",
    question: "Line sweep uses which structure? (set/map)",
    hint: "Needs ordered points. Balanced structure.",
    demoAnswer: "e.g., 'map'",
    correctAnswer: "set",
    xp: 740,
    difficulty: "expert",
    position: { x: 35, y: 55 },
    connections: [71],
  },

  // Level 71-85: LEGENDARY LANDS (Expert+)
  {
    id: 71,
    title: "FFT Frequency",
    story: "Fast Fourier Transform reduces polynomial multiplication to?",
    question: "FFT complexity? (Big-O)",
    hint: "n log n. Much faster than naive O(n²).",
    demoAnswer: "e.g., 'O(n^2)'",
    correctAnswer: "O(nlogn)",
    xp: 750,
    difficulty: "expert",
    position: { x: 30, y: 50 },
    connections: [72],
  },
  {
    id: 72,
    title: "Mo's Algorithm Maze",
    story: "Mo's algorithm complexity with Q queries?",
    question: "Mo's algorithm time? (include Q, N, sqrt)",
    hint: "Q queries × sqrt(N) per query.",
    demoAnswer: "e.g., 'O(N)'",
    correctAnswer: "O(Qsqrt(N))",
    xp: 760,
    difficulty: "expert",
    position: { x: 25, y: 45 },
    connections: [73],
  },
  {
    id: 73,
    title: "Aho-Corasick Apex",
    story: "Aho-Corasick for multiple pattern matching uses?",
    question: "Aho-Corasick builds? (trie/tree)",
    hint: "Trie + failure links for pattern matching.",
    demoAnswer: "e.g., 'tree'",
    correctAnswer: "trie",
    xp: 770,
    difficulty: "expert",
    position: { x: 20, y: 40 },
    connections: [74],
  },
  {
    id: 74,
    title: "Suffix Automaton Summit",
    story: "Suffix automaton is minimal? The property matters.",
    question: "Suffix automaton is minimal? (yes/no)",
    hint: "Yes! It's the minimal DFA recognizing all suffixes.",
    demoAnswer: "e.g., 'no'",
    correctAnswer: "yes",
    xp: 780,
    difficulty: "expert",
    position: { x: 20, y: 35 },
    connections: [75],
  },
  {
    id: 75,
    title: "Heavy-Light Decomposition",
    story: "HLD decomposes tree into? The path structure.",
    question: "Heavy-Light creates? (chains/cycles)",
    hint: "Heavy paths form chains from root.",
    demoAnswer: "e.g., 'cycles'",
    correctAnswer: "chains",
    xp: 790,
    difficulty: "expert",
    position: { x: 20, y: 30 },
    connections: [76],
  },
  {
    id: 76,
    title: "Centroid Citadel",
    story: "Centroid decomposition tree height?",
    question: "Centroid tree height? (Big-O)",
    hint: "Logarithmic. Balanced by definition.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(logn)",
    xp: 800,
    difficulty: "expert",
    position: { x: 25, y: 25 },
    connections: [77],
  },
  {
    id: 77,
    title: "Persistent Paradise",
    story: "Persistent segment tree: each update creates?",
    question: "Persistent structure creates? (copy/reference)",
    hint: "It persists old versions. Partial copying.",
    demoAnswer: "e.g., 'reference'",
    correctAnswer: "copy",
    xp: 810,
    difficulty: "expert",
    position: { x: 30, y: 20 },
    connections: [78],
  },
  {
    id: 78,
    title: "Splay Tree Spiral",
    story: "Splay tree amortized access time?",
    question: "Splay tree amortized access? (Big-O)",
    hint: "Logarithmic amortized, though single access can be O(n).",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(logn)",
    xp: 820,
    difficulty: "expert",
    position: { x: 35, y: 20 },
    connections: [79],
  },
  {
    id: 79,
    title: "Skip List Skies",
    story: "Skip list is probabilistic alternative to?",
    question: "Skip list replaces? (hashtable/balancedtree)",
    hint: "Self-balancing trees like AVL or Red-Black.",
    demoAnswer: "e.g., 'hashtable'",
    correctAnswer: "balancedtree",
    xp: 830,
    difficulty: "expert",
    position: { x: 40, y: 20 },
    connections: [80],
  },
  {
    id: 80,
    title: "Treap Terminus",
    story: "Treap combines BST with? The random priority.",
    question: "Treap = Tree + ? (one word)",
    hint: "Heap! Tree + Heap = Treap.",
    demoAnswer: "e.g., 'stack'",
    correctAnswer: "heap",
    xp: 840,
    difficulty: "expert",
    position: { x: 45, y: 25 },
    connections: [81],
  },

  // Level 81-100: LEGENDARY LAIR (Expert+++)
  {
    id: 81,
    title: "Palindromic Partitioning",
    story: "Min cuts to make all substrings palindromes: uses which DP?",
    question: "Palindrome partitioning uses? (1D/2D) DP",
    hint: "Needs dp[i][j] for substring. Two dimensions.",
    demoAnswer: "e.g., '1D'",
    correctAnswer: "2D",
    xp: 850,
    difficulty: "expert",
    position: { x: 50, y: 30 },
    connections: [82],
  },
  {
    id: 82,
    title: "Matrix Chain Multiplication",
    story: "Optimal parenthesization: complexity?",
    question: "Matrix chain DP complexity? (Big-O)",
    hint: "Cubic. Three nested loops.",
    demoAnswer: "e.g., 'O(n^2)'",
    correctAnswer: "O(n^3)",
    xp: 860,
    difficulty: "expert",
    position: { x: 55, y: 35 },
    connections: [83],
  },
  {
    id: 83,
    title: "Edit Distance Enigma",
    story: "Levenshtein distance 'kitten' → 'sitting'? Code DP table.",
    question: "Edit distance 'kitten' to 'sitting'? (number)",
    hint: "k→s, e→i, insert g. Three operations.",
    demoAnswer: "e.g., '5'",
    correctAnswer: "3",
    xp: 870,
    difficulty: "expert",
    position: { x: 60, y: 40 },
    connections: [84],
  },
  {
    id: 84,
    title: "Coin Change Conundrum",
    story: "Coins [1,2,5], make 11. Minimum coins?",
    question: "Min coins for 11 using [1,2,5]? (number)",
    hint: "5+5+1 = 11. Three coins.",
    demoAnswer: "e.g., '4'",
    correctAnswer: "3",
    xp: 880,
    difficulty: "expert",
    position: { x: 65, y: 45 },
    connections: [85],
  },
  {
    id: 85,
    title: "LIS Lair",
    story: "Longest Increasing Subsequence: optimal approach?",
    question: "LIS optimal time? (Big-O)",
    hint: "Binary search + DP. n log n.",
    demoAnswer: "e.g., 'O(n^2)'",
    correctAnswer: "O(nlogn)",
    xp: 890,
    difficulty: "expert",
    position: { x: 70, y: 50 },
    connections: [86],
  },
  {
    id: 86,
    title: "Bipartite Boundary",
    story: "2-coloring graph checks if it's?",
    question: "2-colorable graph is? (bipartite/complete)",
    hint: "If you can color with 2 colors, it's bipartite.",
    demoAnswer: "e.g., 'complete'",
    correctAnswer: "bipartite",
    xp: 900,
    difficulty: "expert",
    position: { x: 70, y: 55 },
    connections: [87],
  },
  {
    id: 87,
    title: "Biconnected Basin",
    story: "Biconnected graph has no?",
    question: "Biconnected means no? (bridges/articulation)",
    hint: "No articulation points. Highly connected.",
    demoAnswer: "e.g., 'bridges'",
    correctAnswer: "articulation",
    xp: 910,
    difficulty: "expert",
    position: { x: 65, y: 60 },
    connections: [88],
  },
  {
    id: 88,
    title: "Max Flow Metropolis",
    story: "Ford-Fulkerson finds maximum? The flow capacity.",
    question: "Ford-Fulkerson finds max? (flow/cut)",
    hint: "Maximum flow from source to sink.",
    demoAnswer: "e.g., 'cut'",
    correctAnswer: "flow",
    xp: 920,
    difficulty: "expert",
    position: { x: 60, y: 65 },
    connections: [89],
  },
  {
    id: 89,
    title: "Min Cut Cavern",
    story: "Max-flow min-cut theorem: max flow equals?",
    question: "Max flow = min ? (cut/path)",
    hint: "Minimum cut capacity equals maximum flow.",
    demoAnswer: "e.g., 'path'",
    correctAnswer: "cut",
    xp: 930,
    difficulty: "expert",
    position: { x: 55, y: 70 },
    connections: [90],
  },
  {
    id: 90,
    title: "Dinic's Dimension",
    story: "Dinic's algorithm complexity?",
    question: "Dinic's max flow time? (use V, E)",
    hint: "V² × E. Faster than Ford-Fulkerson.",
    demoAnswer: "e.g., 'O(VE)'",
    correctAnswer: "O(V^2*E)",
    xp: 940,
    difficulty: "expert",
    position: { x: 50, y: 75 },
    connections: [91],
  },

  // Level 91-100: ULTIMATE ASCENSION (Legendary)
  {
    id: 91,
    title: "Miller-Rabin Realm",
    story: "Miller-Rabin tests for? The primality oracle.",
    question: "Miller-Rabin is primality? (test/proof)",
    hint: "Probabilistic test, not deterministic proof.",
    demoAnswer: "e.g., 'proof'",
    correctAnswer: "test",
    xp: 950,
    difficulty: "expert",
    position: { x: 45, y: 75 },
    connections: [92],
  },
  {
    id: 92,
    title: "Pollard Rho Ridge",
    story: "Pollard's rho algorithm factors integers using?",
    question: "Pollard rho uses cycle detection with? (Floyd/Brent)",
    hint: "Floyd's tortoise and hare.",
    demoAnswer: "e.g., 'Brent'",
    correctAnswer: "Floyd",
    xp: 960,
    difficulty: "expert",
    position: { x: 40, y: 70 },
    connections: [93],
  },
  {
    id: 93,
    title: "Chinese Remainder Route",
    story: "CRT solves system of modular equations. Ancient Chinese origin?",
    question: "Chinese Remainder Theorem origin? (yes/no)",
    hint: "Yes! From ancient Chinese mathematics.",
    demoAnswer: "e.g., 'no'",
    correctAnswer: "yes",
    xp: 970,
    difficulty: "expert",
    position: { x: 35, y: 65 },
    connections: [94],
  },
  {
    id: 94,
    title: "Fermat's Final Fort",
    story: "Fermat's Little Theorem: a^p ≡ ? (mod p) for prime p",
    question: "Fermat: a^p ≡ ? (mod p). Answer: a or 1?",
    hint: "If p is prime, a^p ≡ a (mod p).",
    demoAnswer: "e.g., '1'",
    correctAnswer: "a",
    xp: 980,
    difficulty: "expert",
    position: { x: 30, y: 60 },
    connections: [95],
  },
  {
    id: 95,
    title: "Euler Totient Tower",
    story: "φ(12) counts numbers coprime to 12. Code it.",
    question: "Euler's totient φ(12) = ? (number)",
    hint: "Coprime to 12: 1,5,7,11. Count = 4.",
    demoAnswer: "e.g., '6'",
    correctAnswer: "4",
    xp: 990,
    difficulty: "expert",
    position: { x: 25, y: 55 },
    connections: [96],
  },
  {
    id: 96,
    title: "GCD Gateway",
    story: "Euclidean algorithm: GCD(48, 18) requires how many steps?",
    question: "GCD(48,18) steps in Euclidean algorithm? (number)",
    hint: "48%18=12, 18%12=6, 12%6=0. Count steps.",
    demoAnswer: "e.g., '4'",
    correctAnswer: "3",
    xp: 1000,
    difficulty: "expert",
    position: { x: 20, y: 50 },
    connections: [97],
  },
  {
    id: 97,
    title: "LCM Labyrinth",
    story: "LCM(12, 18) using GCD formula: LCM = (a×b)/GCD. Calculate.",
    question: "LCM(12, 18) = ? (number)",
    hint: "GCD(12,18)=6. LCM = (12×18)/6 = 36.",
    demoAnswer: "e.g., '24'",
    correctAnswer: "36",
    xp: 1010,
    difficulty: "expert",
    position: { x: 20, y: 45 },
    connections: [98],
  },
  {
    id: 98,
    title: "Sieve of Shadows",
    story: "Sieve of Eratosthenes finds primes up to n in?",
    question: "Sieve of Eratosthenes time? (Big-O)",
    hint: "n log log n. Super efficient for primes.",
    demoAnswer: "e.g., 'O(n)'",
    correctAnswer: "O(nloglogn)",
    xp: 1020,
    difficulty: "expert",
    position: { x: 25, y: 40 },
    connections: [99],
  },
  {
    id: 99,
    title: "NP-Complete Nexus",
    story: "Traveling Salesman: find shortest tour visiting all cities. Problem class?",
    question: "TSP is? (NP-hard/P)",
    hint: "One of the hardest problems. NP-hard.",
    demoAnswer: "e.g., 'P'",
    correctAnswer: "NP-hard",
    xp: 1030,
    difficulty: "expert",
    position: { x: 30, y: 35 },
    connections: [100],
  },
  {
    id: 100,
    title: "The Byte Origin",
    story: "You've reached the core. P vs NP: the million-dollar question. If P=NP, what happens to cryptography?",
    question: "If P=NP, current encryption becomes? (broken/stronger)",
    hint: "Easy to break if solving is as easy as verifying.",
    demoAnswer: "e.g., 'stronger'",
    correctAnswer: "broken",
    xp: 1050,
    difficulty: "expert",
    position: { x: 35, y: 30 },
    connections: [],
  },
];

// Helper function to get node by ID
export function getNodeById(id: number): AdventureNode | undefined {
  return adventureNodes.find(node => node.id === id);
}

// Helper to check if node is unlocked (previous node completed)
export function isNodeUnlocked(nodeId: number, completedNodes: number[]): boolean {
  if (nodeId === 1) return true; // First node always unlocked
  
  const node = getNodeById(nodeId);
  if (!node) return false;
  
  // Check if any of the nodes that connect TO this node are completed
  const parentNodes = adventureNodes.filter(n => n.connections.includes(nodeId));
  return parentNodes.some(parent => completedNodes.includes(parent.id));
}

